<html>

<head>
    <script>
        const address = "http://172.24.101.175:3000"
        var videos = [];
        var currentIndex = 0;
        window.onload = function () {
            runUpdate();
        }

        function runUpdate() {
            fetch(`${address}/video`).then(e => {
                e.json().then(x => {
                    videos = x;
                    setTimeout(runUpdate, 60000);
                    nextVideo();
                }).catch(e => {
                    setTimeout(runUpdate, 60000);

                })
            });
        }
        function nextVideo() {
            currentIndex++;
            if (currentIndex >= videos.length) {
                currentIndex = 0;
            }

            if (videos.length > 0) {
                document.getElementById('player').src = `${address}/video/${videos[currentIndex]}`;
                document.getElementById('player').play();
            }
        }

    </script>
</head>

<body style="margin: 0px;" onclick="document.getElementById('player').play()">
    <video id="player" style="width: 100vw" preload="auto" autoplay onended="nextVideo()"></video>
</body>

</html>